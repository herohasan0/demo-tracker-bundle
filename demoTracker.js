'use strict';(function(){function y(a,b,c,k){function h(e){return e instanceof c?e:new c(function(q){q(e)})}return new (c||(c=Promise))(function(e,q){function r(g){try{l(k.next(g))}catch(f){q(f)}}function n(g){try{l(k["throw"](g))}catch(f){q(f)}}function l(g){g.done?e(g.value):h(g.value).then(r,n)}l((k=k.apply(a,b||[])).next())})}function w(a){var b=Object,c=b.assign;a=Object.assign({company_id:"b2m_test_website",company_app_name:"b2metric website",task_id:"TRACKER-TEST"},a);var k=navigator.userAgent,
h=z,e=JSON.stringify(A),q=String(G.getTimezoneOffset()),r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=`${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`,l=B,g=String,f=document.createElement("canvas");f.id="myCanvas";f.hidden=!0;f.width=200;f.height=40;document.body.appendChild(f);f=document.getElementById("myCanvas");console.log("canvas",f);var d=f.getContext("2d");d.fillStyle="rgb(255,0,255)";d.beginPath();d.rect(20,20,150,100);d.fill();d.stroke();d.closePath();
d.beginPath();d.fillStyle="rgb(0,255,255)";d.arc(50,50,50,0,2*Math.PI,!0);d.fill();d.stroke();d.closePath();d.textBaseline="top";d.font='17px "Arial 17"';d.textBaseline="alphabetic";d.fillStyle="rgb(255,5,5)";d.rotate(.03);d.fillText("abz190#$%^@\u00a3\u00e9\u00fa",4,17);d.fillStyle="rgb(155,255,5)";d.shadowBlur=8;d.shadowColor="red";d.fillRect(20,12,100,5);f=f.toDataURL();d=0;for(let t=0;t<f.length;t++){let H=f.charCodeAt(t);d=(d<<5)-d+H;d&=d}g=g(d);a:{try{var m=document.createElement("canvas");
m.id="webGLCanvas";m.hidden=!0;document.body.appendChild(m);var p=!(!window.WebGLRenderingContext||!m.getContext("webgl")&&!m.getContext("experimental-webgl"))}catch(t){p=!1}if(p&&(p=document.getElementById("webGLCanvas"),m=p.getContext("webgl")||p.getContext("experimental-webgl"))){p=m.getParameter(m.VENDOR);m=m.getParameter(m.RENDERER);p=`${p} ${m}`;break a}p=null}b=c.call(b,a,{user_browser_info:{user_agent:k,http_accept_headers:h,plugins:e,timezone_offset:q,timezone:r,screen:n,system_fonts:l,hash_of_canvas_fingerprint:g,
webgl_vendor_renderer:p,dnt_header_enabled:!0,language:navigator.language,platform:navigator.platform,touch_support:String(I),audio_context_fingerprint:C,hardware_concurrency:navigator.hardwareConcurrency,device_memory:navigator.deviceMemory}});fetch("https://tracker.b2metric.com/tracker/tracker/callback",{cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(b),keepalive:!0});
b=new Blob([JSON.stringify(b)],{type:"application/json"});navigator.sendBeacon("https://tracker.b2metric.com/tracker/tracker/callback",b)}function J(){return"xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}function D(){u||(E=Date.now(),u=!0)}function x(){u&&(0<Date.now()-E&&(new Date).toISOString(),u=!1)}var K=function(){function a(n,l){void 0!==e[n]&&"function"===typeof e[n].setValueAtTime&&e[n].setValueAtTime(l,c.currentTime)}function b(n){for(var l=null,g=4500;5E3>g;g++){var f=
n.renderedBuffer.getChannelData(0)[g];l+=Math.abs(f)}q=l.toString();"function"===typeof r&&r(q);e.disconnect()}var c=null,k=null,h=null,e=null,q=null,r=null;return{run:function(n,l=!1){r=n;try{c=new (window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100),k=c.currentTime,h=c.createOscillator(),h.type="triangle",h.frequency.setValueAtTime(1E4,k),e=c.createDynamicsCompressor(),a("threshold",-50),a("knee",40),a("ratio",12),a("reduction",-20),a("attack",0),a("release",.25),h&&e&&
c&&(h.connect(e),e.connect(c.destination),h.start(0),c.startRendering(),c.oncomplete=b)}catch(g){if(l)throw g;}}}}();let C="";(()=>{K.run(a=>{C=a})})();let I="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||0<navigator.maxTouchPoints||0<window.navigator.msMaxTouchPoints;"function"===typeof SuppressedError?SuppressedError:function(a,b,c){c=Error(c);return c.name="SuppressedError",c.error=a,c.suppressed=b,c};let F=new Set("Arial;Arial Black;Bahnschrift;Calibri;Cambria;Cambria Math;Candara;Comic Sans MS;Consolas;Constantia;Corbel;Courier New;Ebrima;Franklin Gothic Medium;Gabriola;Gadugi;Georgia;HoloLens MDL2 Assets;Impact;Ink Free;Javanese Text;Leelawadee UI;Lucida Console;Lucida Sans Unicode;Malgun Gothic;Marlett;Microsoft Himalaya;Microsoft JhengHei;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft YaHei;Microsoft Yi Baiti;MingLiU-ExtB;Mongolian Baiti;MS Gothic;MV Boli;Myanmar Text;Nirmala UI;Palatino Linotype;Segoe MDL2 Assets;Segoe Print;Segoe Script;Segoe UI;Segoe UI Historic;Segoe UI Emoji;Segoe UI Symbol;SimSun;Sitka;Sylfaen;Symbol;Tahoma;Times New Roman;Trebuchet MS;Verdana;Webdings;Wingdings;Yu Gothic;American Typewriter;Andale Mono;Arial;Arial Black;Arial Narrow;Arial Rounded MT Bold;Arial Unicode MS;Avenir;Avenir Next;Avenir Next Condensed;Baskerville;Big Caslon;Bodoni 72;Bodoni 72 Oldstyle;Bodoni 72 Smallcaps;Bradley Hand;Brush Script MT;Chalkboard;Chalkboard SE;Chalkduster;Charter;Cochin;Comic Sans MS;Copperplate;Courier;Courier New;Didot;DIN Alternate;DIN Condensed;Futura;Geneva;Georgia;Gill Sans;Helvetica;Helvetica Neue;Herculanum;Hoefler Text;Impact;Lucida Grande;Luminari;Marker Felt;Menlo;Microsoft Sans Serif;Monaco;Noteworthy;Optima;Palatino;Papyrus;Phosphate;Rockwell;Savoye LET;SignPainter;Skia;Snell Roundhand;Tahoma;Times;Times New Roman;Trattatello;Trebuchet MS;Verdana;Zapfino".split(";").sort());
(()=>y(void 0,void 0,void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of F.values())document.fonts.check(`12px "${b}"`)&&a.add(b);console.log("Available Fonts:",[...a.values()]);[...a.values()]}))();let L=navigator.plugins.length,A=[];for(let a=0;a<L;a++){let b=navigator.plugins[a];A.push({name:b.name,filename:b.filename,type:b[0].type})}window.B2MetricEventTracker=window.B2MetricEventTracker||[];window.B2MetricEventTracker=[];let G=new Date,B=[];(function(){return y(this,void 0,
void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of F.values())document.fonts.check(`12px "${b}"`)&&a.add(b);return[...a.values()]})})().then(a=>B=a);let z=null;var v=new XMLHttpRequest;v.open("GET",document.location,!0);v.send(null);v.onload=function(){z=v.getAllResponseHeaders().toLowerCase()};let E,u=!1;document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?D():x()});(function(){function a(){k=Date.now();h=0}function b(){let e=Date.now();h+=
e-k;k=e}let c=!1,k=Date.now(),h=0;window.addEventListener("load",a);document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?a():b()});document.addEventListener("scroll",function(e){c||(b(),90<=(window.scrollY+window.innerHeight)/document.documentElement.offsetHeight*100&&(w({event_name:"scroll",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"engagement_time_msec",int_value:h},
{key:"timestamp",int_value:(new Date).toISOString()}]}),a(),c=!0))})})();(function(){document.addEventListener("click",a=>{for(a=a.target;a&&a!==document.body;){if(a.hasAttribute("B2M_BUTTON")){w({event_name:"click",event_date:(new Date).toISOString(),event_timestamp:Math.floor((new Date).getTime()/1E3),event_params:[{key:"page_title",string_value:document.title},{key:"classes",string_value:a.className},{key:"id",string_value:a.id},{key:"tag_name",string_value:a.tagName},{key:"inner_text",string_value:a.innerText.slice(0,
50)}]});break}a=a.parentElement}})})();window.addEventListener("focus",D);window.addEventListener("blur",x);window.addEventListener("beforeunload",x);(()=>{{var a=localStorage.getItem("sessionId");let h=parseInt(localStorage.getItem("lastActivity")||"0");var b=Date.now();!a||18E5<b-h?(a=J(),localStorage.setItem("sessionId",a),localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,isNewSession:!0}):(localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,isNewSession:!1})}const {sessionId:c,
isNewSession:k}=b;b={eventType:"session_start",timestamp:(new Date).toISOString(),details:{sessionId:c}};k&&Object.assign(Object.assign({},b),{details:{sessionId:c}})})();w({event_name:"page_view",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"page_url",string_value:location.href},{key:"referrer",string_value:document.referrer}]})})()
