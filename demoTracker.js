'use strict';(function(){function w(a,b,c,h){function g(e){return e instanceof c?e:new c(function(n){n(e)})}return new (c||(c=Promise))(function(e,n){function p(k){try{l(h.next(k))}catch(f){n(f)}}function m(k){try{l(h["throw"](k))}catch(f){n(f)}}function l(k){k.done?e(k.value):g(k.value).then(p,m)}l((h=h.apply(a,b||[])).next())})}function t(a){var b=Object,c=b.assign;a=Object.assign({company_id:"b2m_test_website",company_app_name:"b2metric website",task_id:"TRACKER-TEST"},a);var h=navigator.userAgent,
g=x,e=JSON.stringify(y),n=String(E.getTimezoneOffset()),p=Intl.DateTimeFormat().resolvedOptions().timeZone,m=`${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`,l=z,k=String,f=document.createElement("canvas");f.id="myCanvas";f.hidden=!0;f.width=200;f.height=40;document.body.appendChild(f);f=document.getElementById("myCanvas");console.log("canvas",f);var d=f.getContext("2d");d.fillStyle="rgb(255,0,255)";d.beginPath();d.rect(20,20,150,100);d.fill();d.stroke();d.closePath();
d.beginPath();d.fillStyle="rgb(0,255,255)";d.arc(50,50,50,0,2*Math.PI,!0);d.fill();d.stroke();d.closePath();d.textBaseline="top";d.font='17px "Arial 17"';d.textBaseline="alphabetic";d.fillStyle="rgb(255,5,5)";d.rotate(.03);d.fillText("abz190#$%^@\u00a3\u00e9\u00fa",4,17);d.fillStyle="rgb(155,255,5)";d.shadowBlur=8;d.shadowColor="red";d.fillRect(20,12,100,5);f=f.toDataURL();d=0;for(let u=0;u<f.length;u++){let F=f.charCodeAt(u);d=(d<<5)-d+F;d&=d}b=c.call(b,a,{user_browser_info:{user_agent:h,http_accept_headers:g,
plugins:e,timezone_offset:n,timezone:p,screen:m,system_fonts:l,hash_of_canvas_fingerprint:k(d),dnt_header_enabled:!0,language:navigator.language,platform:navigator.platform,touch_support:String(G),audio_context_fingerprint:A,hardware_concurrency:navigator.hardwareConcurrency,device_memory:navigator.deviceMemory}});fetch("https://tracker.b2metric.com/tracker/tracker/callback",{cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/json"},
method:"POST",body:JSON.stringify(b),keepalive:!0});b=new Blob([JSON.stringify(b)],{type:"application/json"});navigator.sendBeacon("https://tracker.b2metric.com/tracker/tracker/callback",b)}function H(){return"xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}function B(){q||(C=Date.now(),q=!0)}function v(){q&&(0<Date.now()-C&&(new Date).toISOString(),q=!1)}var I=function(){function a(m,l){void 0!==e[m]&&"function"===typeof e[m].setValueAtTime&&e[m].setValueAtTime(l,c.currentTime)}
function b(m){for(var l=null,k=4500;5E3>k;k++){var f=m.renderedBuffer.getChannelData(0)[k];l+=Math.abs(f)}n=l.toString();"function"===typeof p&&p(n);e.disconnect()}var c=null,h=null,g=null,e=null,n=null,p=null;return{run:function(m,l=!1){p=m;try{c=new (window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100),h=c.currentTime,g=c.createOscillator(),g.type="triangle",g.frequency.setValueAtTime(1E4,h),e=c.createDynamicsCompressor(),a("threshold",-50),a("knee",40),a("ratio",12),a("reduction",
-20),a("attack",0),a("release",.25),g&&e&&c&&(g.connect(e),e.connect(c.destination),g.start(0),c.startRendering(),c.oncomplete=b)}catch(k){if(l)throw k;}}}}();let A="";(()=>{I.run(a=>{A=a})})();let G="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||0<navigator.maxTouchPoints||0<window.navigator.msMaxTouchPoints;"function"===typeof SuppressedError?SuppressedError:function(a,b,c){c=Error(c);return c.name="SuppressedError",c.error=a,c.suppressed=b,c};let D=new Set("Arial;Arial Black;Bahnschrift;Calibri;Cambria;Cambria Math;Candara;Comic Sans MS;Consolas;Constantia;Corbel;Courier New;Ebrima;Franklin Gothic Medium;Gabriola;Gadugi;Georgia;HoloLens MDL2 Assets;Impact;Ink Free;Javanese Text;Leelawadee UI;Lucida Console;Lucida Sans Unicode;Malgun Gothic;Marlett;Microsoft Himalaya;Microsoft JhengHei;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft YaHei;Microsoft Yi Baiti;MingLiU-ExtB;Mongolian Baiti;MS Gothic;MV Boli;Myanmar Text;Nirmala UI;Palatino Linotype;Segoe MDL2 Assets;Segoe Print;Segoe Script;Segoe UI;Segoe UI Historic;Segoe UI Emoji;Segoe UI Symbol;SimSun;Sitka;Sylfaen;Symbol;Tahoma;Times New Roman;Trebuchet MS;Verdana;Webdings;Wingdings;Yu Gothic;American Typewriter;Andale Mono;Arial;Arial Black;Arial Narrow;Arial Rounded MT Bold;Arial Unicode MS;Avenir;Avenir Next;Avenir Next Condensed;Baskerville;Big Caslon;Bodoni 72;Bodoni 72 Oldstyle;Bodoni 72 Smallcaps;Bradley Hand;Brush Script MT;Chalkboard;Chalkboard SE;Chalkduster;Charter;Cochin;Comic Sans MS;Copperplate;Courier;Courier New;Didot;DIN Alternate;DIN Condensed;Futura;Geneva;Georgia;Gill Sans;Helvetica;Helvetica Neue;Herculanum;Hoefler Text;Impact;Lucida Grande;Luminari;Marker Felt;Menlo;Microsoft Sans Serif;Monaco;Noteworthy;Optima;Palatino;Papyrus;Phosphate;Rockwell;Savoye LET;SignPainter;Skia;Snell Roundhand;Tahoma;Times;Times New Roman;Trattatello;Trebuchet MS;Verdana;Zapfino".split(";").sort());
(()=>w(void 0,void 0,void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of D.values())document.fonts.check(`12px "${b}"`)&&a.add(b);console.log("Available Fonts:",[...a.values()]);[...a.values()]}))();let J=navigator.plugins.length,y=[];for(let a=0;a<J;a++){let b=navigator.plugins[a];y.push({name:b.name,filename:b.filename,type:b[0].type})}window.B2MetricEventTracker=window.B2MetricEventTracker||[];window.B2MetricEventTracker=[];let E=new Date,z=[];(function(){return w(this,void 0,
void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of D.values())document.fonts.check(`12px "${b}"`)&&a.add(b);return[...a.values()]})})().then(a=>z=a);let x=null;var r=new XMLHttpRequest;r.open("GET",document.location,!0);r.send(null);r.onload=function(){x=r.getAllResponseHeaders().toLowerCase()};let C,q=!1;document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?B():v()});(function(){function a(){h=Date.now();g=0}function b(){let e=Date.now();g+=
e-h;h=e}let c=!1,h=Date.now(),g=0;window.addEventListener("load",a);document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?a():b()});document.addEventListener("scroll",function(e){c||(b(),90<=(window.scrollY+window.innerHeight)/document.documentElement.offsetHeight*100&&(t({event_name:"scroll",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"engagement_time_msec",int_value:g},
{key:"timestamp",int_value:(new Date).toISOString()}]}),a(),c=!0))})})();(function(){document.addEventListener("click",a=>{for(a=a.target;a&&a!==document.body;){if(a.hasAttribute("B2M_BUTTON")){t({event_name:"click",event_date:(new Date).toISOString(),event_timestamp:Math.floor((new Date).getTime()/1E3),event_params:[{key:"page_title",string_value:document.title},{key:"classes",string_value:a.className},{key:"id",string_value:a.id},{key:"tag_name",string_value:a.tagName},{key:"inner_text",string_value:a.innerText.slice(0,
50)}]});break}a=a.parentElement}})})();window.addEventListener("focus",B);window.addEventListener("blur",v);window.addEventListener("beforeunload",v);(()=>{{var a=localStorage.getItem("sessionId");let g=parseInt(localStorage.getItem("lastActivity")||"0");var b=Date.now();!a||18E5<b-g?(a=H(),localStorage.setItem("sessionId",a),localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,isNewSession:!0}):(localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,isNewSession:!1})}const {sessionId:c,
isNewSession:h}=b;b={eventType:"session_start",timestamp:(new Date).toISOString(),details:{sessionId:c}};h&&Object.assign(Object.assign({},b),{details:{sessionId:c}})})();t({event_name:"page_view",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"page_url",string_value:location.href},{key:"referrer",string_value:document.referrer}]})})()
