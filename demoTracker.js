'use strict';(function(){function u(a,b,c,f){function e(d){return d instanceof c?d:new c(function(l){l(d)})}return new (c||(c=Promise))(function(d,l){function m(g){try{h(f.next(g))}catch(n){l(n)}}function k(g){try{h(f["throw"](g))}catch(n){l(n)}}function h(g){g.done?d(g.value):e(g.value).then(m,k)}h((f=f.apply(a,b||[])).next())})}function r(a){a=Object.assign(Object.assign({company_id:"b2m_test_website",company_app_name:"b2metric website",task_id:"TRACKER-TEST"},a),{user_browser_info:{user_agent:navigator.userAgent,
http_accept_headers:v,plugins:JSON.stringify(w),timezone_offset:String(C.getTimezoneOffset()),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:`${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`,system_fonts:x,dnt_header_enabled:!0,language:navigator.language,platform:navigator.platform,touch_support:String(D),audio_context_fingerprint:y,hardware_concurrency:navigator.hardwareConcurrency,device_memory:navigator.deviceMemory}});fetch("https://tracker.b2metric.com/tracker/tracker/callback",
{cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a),keepalive:!0});a=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon("https://tracker.b2metric.com/tracker/tracker/callback",a)}function E(){return"xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}function z(){p||(A=Date.now(),p=!0)}function t(){p&&(0<Date.now()-A&&(new Date).toISOString(),
p=!1)}var F=function(){function a(k,h){void 0!==d[k]&&"function"===typeof d[k].setValueAtTime&&d[k].setValueAtTime(h,c.currentTime)}function b(k){for(var h=null,g=4500;5E3>g;g++){var n=k.renderedBuffer.getChannelData(0)[g];h+=Math.abs(n)}l=h.toString();"function"===typeof m&&m(l);d.disconnect()}var c=null,f=null,e=null,d=null,l=null,m=null;return{run:function(k,h=!1){m=k;try{c=new (window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100),f=c.currentTime,e=c.createOscillator(),
e.type="triangle",e.frequency.setValueAtTime(1E4,f),d=c.createDynamicsCompressor(),a("threshold",-50),a("knee",40),a("ratio",12),a("reduction",-20),a("attack",0),a("release",.25),e&&d&&c&&(e.connect(d),d.connect(c.destination),e.start(0),c.startRendering(),c.oncomplete=b)}catch(g){if(h)throw g;}}}}();let y="";(()=>{F.run(a=>{y=a})})();let D="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||0<navigator.maxTouchPoints||0<window.navigator.msMaxTouchPoints;"function"===
typeof SuppressedError?SuppressedError:function(a,b,c){c=Error(c);return c.name="SuppressedError",c.error=a,c.suppressed=b,c};let B=new Set("Arial;Arial Black;Bahnschrift;Calibri;Cambria;Cambria Math;Candara;Comic Sans MS;Consolas;Constantia;Corbel;Courier New;Ebrima;Franklin Gothic Medium;Gabriola;Gadugi;Georgia;HoloLens MDL2 Assets;Impact;Ink Free;Javanese Text;Leelawadee UI;Lucida Console;Lucida Sans Unicode;Malgun Gothic;Marlett;Microsoft Himalaya;Microsoft JhengHei;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft YaHei;Microsoft Yi Baiti;MingLiU-ExtB;Mongolian Baiti;MS Gothic;MV Boli;Myanmar Text;Nirmala UI;Palatino Linotype;Segoe MDL2 Assets;Segoe Print;Segoe Script;Segoe UI;Segoe UI Historic;Segoe UI Emoji;Segoe UI Symbol;SimSun;Sitka;Sylfaen;Symbol;Tahoma;Times New Roman;Trebuchet MS;Verdana;Webdings;Wingdings;Yu Gothic;American Typewriter;Andale Mono;Arial;Arial Black;Arial Narrow;Arial Rounded MT Bold;Arial Unicode MS;Avenir;Avenir Next;Avenir Next Condensed;Baskerville;Big Caslon;Bodoni 72;Bodoni 72 Oldstyle;Bodoni 72 Smallcaps;Bradley Hand;Brush Script MT;Chalkboard;Chalkboard SE;Chalkduster;Charter;Cochin;Comic Sans MS;Copperplate;Courier;Courier New;Didot;DIN Alternate;DIN Condensed;Futura;Geneva;Georgia;Gill Sans;Helvetica;Helvetica Neue;Herculanum;Hoefler Text;Impact;Lucida Grande;Luminari;Marker Felt;Menlo;Microsoft Sans Serif;Monaco;Noteworthy;Optima;Palatino;Papyrus;Phosphate;Rockwell;Savoye LET;SignPainter;Skia;Snell Roundhand;Tahoma;Times;Times New Roman;Trattatello;Trebuchet MS;Verdana;Zapfino".split(";").sort());
(()=>u(void 0,void 0,void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of B.values())document.fonts.check(`12px "${b}"`)&&a.add(b);console.log("Available Fonts:",[...a.values()]);[...a.values()]}))();let G=navigator.plugins.length,w=[];for(let a=0;a<G;a++){let b=navigator.plugins[a];w.push({name:b.name,filename:b.filename,type:b[0].type})}window.B2MetricEventTracker=window.B2MetricEventTracker||[];window.B2MetricEventTracker=[];let C=new Date,x=[];(function(){return u(this,void 0,
void 0,function*(){yield document.fonts.ready;let a=new Set;for(let b of B.values())document.fonts.check(`12px "${b}"`)&&a.add(b);return[...a.values()]})})().then(a=>x=a);let v=null;var q=new XMLHttpRequest;q.open("GET",document.location,!0);q.send(null);q.onload=function(){v=q.getAllResponseHeaders().toLowerCase()};let A,p=!1;document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?z():t()});(function(){function a(){f=Date.now();e=0}function b(){let d=Date.now();e+=
d-f;f=d}let c=!1,f=Date.now(),e=0;window.addEventListener("load",a);document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState?a():b()});document.addEventListener("scroll",function(d){c||(b(),90<=(window.scrollY+window.innerHeight)/document.documentElement.offsetHeight*100&&(console.log("do somethn"),r({event_name:"scroll",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"engagement_time_msec",
int_value:e},{key:"timestamp",int_value:(new Date).toISOString()}]}),a(),c=!0))})})();(function(){document.addEventListener("click",a=>{for(a=a.target;a&&a!==document.body;){if(a.hasAttribute("B2M_BUTTON")){r({event_name:"click",event_date:(new Date).toISOString(),event_timestamp:Math.floor((new Date).getTime()/1E3),event_params:[{key:"page_title",string_value:document.title},{key:"classes",string_value:a.className},{key:"id",string_value:a.id},{key:"tag_name",string_value:a.tagName},{key:"inner_text",
string_value:a.innerText.slice(0,50)}]});break}a=a.parentElement}})})();window.addEventListener("focus",z);window.addEventListener("blur",t);window.addEventListener("beforeunload",t);(()=>{{var a=localStorage.getItem("sessionId");let e=parseInt(localStorage.getItem("lastActivity")||"0");var b=Date.now();!a||18E5<b-e?(a=E(),localStorage.setItem("sessionId",a),localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,isNewSession:!0}):(localStorage.setItem("lastActivity",b.toString()),b={sessionId:a,
isNewSession:!1})}const {sessionId:c,isNewSession:f}=b;b={eventType:"session_start",timestamp:(new Date).toISOString(),details:{sessionId:c}};f&&Object.assign(Object.assign({},b),{details:{sessionId:c}})})();r({event_name:"page_view",event_date:(new Date).toISOString(),event_timestamp:(new Date).valueOf(),event_params:[{key:"page_title",string_value:document.title},{key:"page_url",string_value:location.href},{key:"referrer",string_value:document.referrer}]})})()
